#ifndef AVIUM_CONFIG_H
#define AVIUM_CONFIG_H

// clang-format off
#define AVM_VERSION_MAJOR @PROJECT_VERSION_MAJOR@
#define AVM_VERSION_MINOR @PROJECT_VERSION_MINOR@
#define AVM_VERSION_PATCH @PROJECT_VERSION_PATCH@
#define AVM_LONG_TYPE @AVM_LONG_TYPE@
// clang-format on

#cmakedefine AVM_WIN32
#cmakedefine AVM_LINUX
#cmakedefine AVM_DARWIN
#cmakedefine AVM_MSVC
#cmakedefine AVM_GNU
#cmakedefine AVM_HAVE_UNICODE
#cmakedefine AVM_HAVE_BACKTRACE
#cmakedefine AVM_HAVE_WIN32_THREADS
#cmakedefine AVM_HAVE_POSIX_THREADS
#cmakedefine AVM_THROW_ON_CAST_FAIL
#cmakedefine AVM_INSERT_INIT_CODE
#cmakedefine AVM_BUILDING

#ifdef AVM_MSVC
#ifdef AVM_BUILDING
#define AVMAPI extern __declspec(dllexport)
#else
#define AVMAPI extern __declspec(dllimport)
#endif
#else
#define AVMAPI extern
#endif

#ifdef AVM_MSVC
#ifndef alignof
#define alignof __alignof
#endif
#ifndef thread_local
#define thread_local __declspec(thread)
#endif
#define never __declspec(noreturn) void
#define typeof(T) decltype(T)
#else
#define _GNU_SOURCE
#ifndef alignof
#define alignof _Alignof
#endif
#ifndef thread_local
#define thread_local _Thread_local
#endif
#define never _Noreturn void
#ifdef __clang__
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wkeyword-macro"
#endif
#define typeof(T) __typeof__(T)
#ifdef __clang__
#pragma GCC diagnostic pop
#endif
#endif // AVM_MSVC

#ifdef __cplusplus
#warning "Avium: C++ is not supported, you may encounter errors."
#endif

#define AVM_MAX_STRING_SIZE          ((uint)-1)
#define AVM_STRING_GROWTH_FACTOR     2
#define AVM_STRING_DEFAULT_CAPACITY  8
#define AVM_ARRAY_LIST_GROWTH_FACTOR 2

#define AVM_LONG_MIN_STR "-9223372036854775808"

#ifdef AVM_HAVE_UNICODE
#define AVM_FMT_UNICODE 'U'
#endif

#define AVM_FMT_INT_DECIMAL    'i'
#define AVM_FMT_INT_HEX        'x'
#define AVM_FMT_INT_BINARY     'b'
#define AVM_FMT_INT_OCTAL      'o'
#define AVM_FMT_INT_UNSIGNED   'u'
#define AVM_FMT_INT_SIZE       'z'
#define AVM_FMT_CHAR           'c'
#define AVM_FMT_FLOAT          'f'
#define AVM_FMT_FLOAT_EXP      'e'
#define AVM_FMT_FLOAT_AUTO     'g'
#define AVM_FMT_STRING         's'
#define AVM_FMT_BOOL           't'
#define AVM_FMT_POINTER        'p'
#define AVM_FMT_VALUE          'v'
#define AVM_FMT_TYPE           'T'
#define AVM_FMT_SIZE           'Z'
#define AVM_FMT_MEMBERS        'm'
#define AVM_FMT_TRUE           "true"
#define AVM_FMT_FALSE          "false"
#define AVM_FMT_HEX_PREFIX     "0x"
#define AVM_FMT_OCTAL_PREFIX   "0o"
#define AVM_FMT_BINARY_PREFIX  "0b"
#define AVM_FMT_UNICODE_PREFIX "U+"

#define AVM_TI_NAME(T)  _TI_##T
#define AVM_VT_NAME(T)  _VT_##T
#define AVM_MTI_NAME(T) _MTI_##T
#define AVM_PTI_NAME(F) _PTI_##F
#define AVM_CTI_NAME(E) _CTI_##E

#define AVM_MEMORY            ((void*)0)
#define AVM_OBJECT            ((void*)1)
#define AVM_OBJECT_FMT_STR    "%s [%x]"
#define AVM_LOCATION_FMT_STR  "%s:%u"
#define AVM_VERSION_FMT_STR   "%u.%u.%u"
#define AVM_RUNTIME_FMT_STR   "%s v%v"
#define AVM_CAST_FAIL_FMT_STR "Tried to cast object [%x] of type %T to type %s."
#define AVM_UNHANDLED_THROW_FMT_STR                                            \
    "Uncaught thrown object of type %T: %v\nThrown from %v while on thread "   \
    "[%x].\n"
#define AVM_RUNTIME_NAME                "Avium x86_64 Runtime Environment"
#define AVM_BACKTRACE_MAX_SYMBOLS       128
#define AVM_BACKTRACE_LINE_SIZE         32
#define AVM_BACKTRACE_SEPARATOR         '@'
#define AVM_BACKTRACE_NOT_AVAILABLE_MSG "Backtrace not available."

#endif // AVIUM_CONFIG_H
